---
title: 添加持久化存储
summary: 您在容器中操作的数据是会随着容器的重启或停止而丢失的，所以需要将数据持久化存储到分布式存储中。
toc: false
---
<div id="toc"></div>

- 由于Docker本身的设定，您在应用中存储的数据会随着容器的重启和关闭而 **消失** ，因此，我们为您提供了 **存储** 功能。我们将这种长期保存用户数据的设定，定义为 **持久化设置** 。

## 持久化设置

### 作用与机制

-  **持久化设置** 通过数据卷挂载目录的方式，将分布式存储以数据卷的形式挂载到您应用下的特定目录，该目录下存储的所有数据都会保存在您的分布式存储中，从而保留了您的个人数据。

  <img src="https://static.goodrain.com/images/acp/docs/user-docs/myapps/V3.5/myapp-datavolume1.png" style="border:1px solid #eee;width:100%" />

- 图中元素的意义

  - **持久化名称** 由您自定义的名称，定义的原则为方便理解与记忆。
  - **持久化目录** 由您指定，将应用下的哪个目录中数据加以保存。
  - **持久化类型** 一般以share-file（共享文件）的形式，将数据保存到分布式存储中。
  - **操作** 在这里，可以删除您的持久化设置。

### 添加持久化

- 点击 **添加持久化** 可以让您自定义添加持久化目录。

<center><img src="https://static.goodrain.com/images/acp/docs/user-docs/myapps/V3.5/myapp-datavolume2.png" style="border:1px solid #eee;width:60%" /></center>

- 图中元素的意义
  - **名称** 由您自定义的持久化设置的名称。
  - **目录** 有您自定义持久化设置的目录。
  - **类型** 选择共享存储类型


## 文件存储

### 作用与机制

- **文件存储** 可以将您其他应用的持久化目录挂载至当前应用下的某个目录下，实现了应用之间的 **文件共享** 

<img src="https://static.goodrain.com/images/acp/docs/user-docs/myapps/V3.5/myapp-datavolume3.png" style="border:1px solid #eee;width:100%" />

- 图中元素的意义
  - **本地持久化目录** 由您自定义，选择当前应用您希望做文件共享设置的目录。
  - **目标持久化名称** 目标应用持久化设置的名称。
  - **目标持久化目录** 目标应用持久化设置的目录。
  - **目标持久化类型** 目标应用持久化设置的存储类型。
  - **目标所属应用** 指向了目标应用。
  - **目标应用所属组** 目标应用所属的应用组。
  - **操作** 在这里可以取消挂载。
- 图中的设置，可以理解为：将 **应用组yml-test** 中的 **应用Redis** 下的 **持久化目录/data** 以 **share-file（文件共享）**的方式，挂载至 **当前应用** 下的 **/var/log** 目录下。这样的设置，在设置了 **/var/log** 的持久化的同时，实现了与 **/data** 目录的文件共享。

### 挂载目录

- 点击 **挂载目录** 可以添加文件存储

  <img src="https://static.goodrain.com/images/acp/docs/user-docs/myapps/V3.5/myapp-datavolume4.png" style="border:1px solid #eee;width:100%" />

- 勾选目标持久化设置之后，在 **本地持久化目录** 中输入您自定义的挂载目录，点击 **确定** 即可完成挂载共享目录。

## 约定规范

- 持久化设置有几点约定规范，请您务必研读遵守
  - 持久化目录不可以选择系统级目录，即不可以使用类似 **/**、**/proc** 、**/etc** 等路径。
  - 持久化目录一旦挂载，该路径下原有文件将不再生效，您也无法找到它们。
  - 持久化设置完成后，需要重启应用方可生效。



