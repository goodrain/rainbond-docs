---
title: 数据库运维
description: 了解如何在 Rainbond 中对数据库进行全生命周期的运维管理
keywords:
- 数据库运维
- 数据库管理
- 数据库备份
- 数据库监控
- 数据库扩缩容
---

本文档介绍如何在 Rainbond 中对数据库进行全面的运维管理，包括生命周期管理、状态监控、伸缩操作、备份恢复、参数配置等。

## 数据库生命周期管理

### 生命周期阶段

数据库实例在 Rainbond 中具有以下生命周期阶段：

| 状态 | 说明 | 操作 |
|------|------|------|
| **创建中** | 数据库正在创建，Pod 正在启动 | 等待创建完成 |
| **运行中** | 数据库正常运行，可以提供服务 | 可进行所有运维操作 |
| **更新中** | 数据库配置或版本正在更新 | 等待更新完成 |
| **停止中** | 数据库正在停止 | 等待停止完成 |
| **已停止** | 数据库已停止，不提供服务 | 可启动或删除 |
| **异常** | 数据库运行异常，需要排查 | 查看日志、事件，进行故障排查 |
| **删除中** | 数据库正在删除 | 等待删除完成 |

### 生命周期管理

您可以对数据库实例执行以下生命周期管理操作，操作按钮位于数据库组件详情页的右上角：

1. 启动数据库: 对于已停止的数据库实例
2. 停止数据库: 停止数据库可以节省资源，但数据库将无法提供服务
3. 重启数据库: 重启数据库用于应用某些配置变更或解决临时性问题
4. 删除数据库: 删除数据库会永久删除所有数据，操作不可恢复


## 数据库伸缩

### 垂直伸缩（资源调整）

调整数据库的 CPU、内存和存储资源。

#### 调整 CPU 和内存

1. 进入数据库组件详情页 → 伸缩标签页
   - 调整 CPU 核心数（如 1 核 → 2 核）
   - 调整内存大小（如 2GB → 4GB）
2. 点击 **确认** 保存变更，系统会自动重启 Pod 使配置生效

#### 扩容存储

扩容数据库存储空间：

1. 进入数据库组件详情页 → 点击 **伸缩** 标签页
2. 输入新的存储大小
3. 确认扩容操作

:::warning 注意
- 存储扩容需要底层 StorageClass 支持在线扩容
:::

### 水平伸缩（实例数调整）

调整数据库的副本数量，提升可用性或性能。

#### 增加/减少实例数

增加只读副本或从节点：

1. 进入数据库组件详情页 → 点击 **伸缩** 标签页
2. 在 **实例数** 部分增加数量（如 1 → 3）
3. 点击 **确认** 保存变更
4. 系统会自动创建新的副本并配置主从关系

## 备份与恢复

:::warning 注意
RabbitMQ 组件目前不支持备份功能
:::

### 备份设置

1. 进入数据库组件详情页 → 点击 **备份** 标签页
2. 选择[备份仓库](https://kubeblocks.io/docs/preview/user_docs/concepts/backup-and-restore/backup/backup-repo)
3. 配置定期备份策略
    - **循环周期**: 每小时、每天、每周
    - **开始时间**: 如每天 02:00
    - **保留时间**: 如保留最近 7 天的备份
4. 保存配置

#### 手动备份

完成备份设置后，您可以随时手动创建备份：
- 点击 **手动备份** 按钮，系统会立即创建一个新的备份


### 恢复备份

目前备份恢复方式仅支持新建实例恢复。

1. 进入数据库组件详情页 → 点击 **备份** 标签页 → 在备份列表中找到要恢复的备份
2. 点击 **恢复** 按钮，弹出恢复配置窗口并确认恢复
3. 系统会创建新实例恢复备份

### 删除备份

删除不再需要的备份：

1. 进入 **备份** 标签页
2. 找到要删除的备份
3. 点击 **删除** 按钮
4. 确认删除操作

:::info 说明
- 删除备份会释放存储空间
- 自动备份策略会根据保留份数自动删除旧备份
:::
