---
title: 离线交付
---

本章节主要介绍离线交付中遇到的困难点，以及 Rainbond 的解决思路，包括实际的操作指南。

## ToB应用私有化交付的困难点

由于数据隐私和网络安全的考虑，大多数toB场景的客户需要私有化应用交付，也就是需要交付到客户的环境里，这样的客户有政府、金融、军工、公安、大型企业、特色行业等，这些私有化场景限制很多，如何提高私有化应用交付的效率是个难题。

**环境网络限制，影响交付效率** 

- 交付实施过程中不能方便查找资料；
- 在交付过程中，交付人员需要跟公司的开发进行沟通，网络限制会影响协作工具的使用，有些客户环境甚至不能带手机，会影响解决问题的效率，环境越复杂影响越大；
- 在离线环境内，安装软件包也没办法直接下载，我们需要将安装文件或配置文件打包成离线包，在客户环境导入。由于业务的复杂性会导致镜像很多且很大，只能有交付人员带移动硬盘到客户现场导入，导致在导入离线包就会花费较多时间。甚至有些环境只能刻录光盘在客户环境导入，光盘本身存不了太大的包，只能分多个光盘刻录；

**客户基础设施差异，需要适配过程**

- 在私有化场景，不同客户的安装环境也不一样，有些使用物理服务器，有些使用虚拟机，不同的虚拟机厂商也有差异。操作系统也各有不同，例如常见的操作系统有CentOS/Debian/Ubuntu/Redhat，当前还有很多国产化操作系统。CPU架构也可能不同，有X86、ARM等；
- 资源准备周期长，需要审批流程；
- 交付的应用需要很重的适配过程，要么在公司适配，要么在客户现场适配；
- 由于环境差异很大，应用交付完需要完整测试和验证，需要大量的人力和时间投入；

**交付人员的技术门槛高**

- 交付人员需要懂底层硬件和网络；
- 交付人员需要懂操作系统和系统运维，需要懂服务治理、高可用、安全、性能分析、备份恢复、交付开发等等；
- 交付人员要能独立排查交付应用的问题，需要很强的技术基础；

**定制化交付迭代效率低**

- 在定制化交付场景，客户会参与到开发过程中，客户需要看到效果后反馈问题，再持续迭代，直到客户满意，过程中需要频繁升级产品；
- 如果开发人员在公司定制开发，升级过程复杂，沟通低效；
- 如果开发人员在客户现场，没有好的开发工具和环境，开发效率低，人力投入大；

**后期维护难度大**

- 应用交付完成后，后期需要保障应用运行的稳定性，离线环境远程没办法运维，报警没办法发出来，运维的难度大；
- 产品有bug、一些预期内的变更或产品升级都需要出差客户现场，支持的成本比较高；

## Rainbond 的解决思路

上述问题的根本原因是因为，应用系统的多环境适配、应用安装部署、应用升级、应用运维等操作自动化程度不高，需要大量人员手工操作，所以效率很低，解决问题的重点在解决应用管理的自动化。

Rainbond 是“以应用为中心”的应用管理平台，[应用模版](/docs/delivery/concept#rainbond-application-template)是 Rainbond 对应用打包的方案，Rainbond 提供应用的全生命周期管理（应用开发、应用编排、应用交付和应用运维）。Rainbond 可以部署到各种运行环境上（物理服务器、虚拟机、私有云），还可以部署到已有 K8s 集群和 Rancher 上，解决客户多环境适配问题；Rainbond 提供应用运维面板解决应用运维问题，使用比较简单，不需要懂容器概念；

Rainbond 的应用模版是一个亮点。与 Helm 相比，使用者不需要像了解 Helm Chart 那样去编写各类资源的模版。只要将业务在平台上运行起来，那么就可以一键发布成应用模版，极大地简化了应用模版的制作。同时这样的模版也可以导出离线包，最终实现离线环境的应用安装部署和应用升级。

Rainbond 的应用模版支持导出三种类型的包，分别适用于不同场景。

### 1. [Rainbond 应用模版](/docs/delivery/concept#rainbond-application-template)：

这是基于 [Rainbond 应用模型](/docs/delivery/concept#rainbond-application-model)导出的完整包。支持业务的全部属性。适用于复杂微服务架构交付，支持升级和回滚，但要求客户环境安装 Kubernetes 和 Rainbond。

### 2. [非容器包](/docs/use-manual/app-store-manage/export-non-container-package)：

该类型的包按照传统应用交付方式打包，但易用性更好，包中包含了环境依赖，并采用静态编译，适合大多数操作系统，移除了对容器运行环境的要求，直接基于主机运行，使用 systemd 进行管理。适用于交付环境安全要求极高，不允许使用容器技术的场景。

### 3. DockerCompose离线包：

这个离线包会包含组件基础镜像以及相应的 docker-compose.yaml 文件。适用于具备 Docker Compose 的离线环境中进行部署。

---

```mdx-code-block
import DocCardList from '@theme/DocCardList';
import {useCurrentSidebarCategory} from '@docusaurus/theme-common';

<DocCardList items={useCurrentSidebarCategory().items}/>
```
