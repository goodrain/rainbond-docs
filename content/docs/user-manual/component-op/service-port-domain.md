---
title: 组件端口
description: Rainbond组件端口和注册策略管理文档
weight: 70
---

### 组件端口管理

#### 组件端口管理

端口相关的管理包含，端口号，端口协议，端口访问控制、对内组件端口变量设置等操作，下图是不同团队、不同端口的组件开启了不同访问控制后的示意图：

<img src="https://static.goodrain.com/images/docs/3.6/user-manual/manage/port-manage.png" width="100%" />


#### 端口号设置

组件端口与容器内部程序监听的端口是完全对应的关系，也就是说，当程序启动后监听的端口是80，那组件的端口就应该设置为80。

可以通过【添加端口】功能为组件添加其他的端口，需要确保添加的端口与程序监听的端口一致，并选择对应的端口协议。

#### 端口协议
端口可以指定不同的协议类型，目前Rainbond支持 `HTTP`、`TCP`、`UDP`和 `MySQL` 协议，请确保选择的协议与你程序监听的协议一致。

协议的选择会影响组件的后续操作：

- 性能分析功能
> 不同协议的组件启动了`性能分析插件`后，其性能分析的方式会有所不同，如HTTP协议会分析HTTP相关的数据，MySQL协议会分析MySQL语句相关的数据。

- 打开对外组件后的访问
> 当端口打开对外组件后，HTTP协议会<b>分配默认的域名</b>，非HTTP协议会<b>分配IP+端口</b>的访问方式

#### 端口访问控制

端口的访问控制分为两类：

- 对内组件
> 这里的<b>内</b>是指团队内，开启组件对团队内部的访问许可，这时当前组件端口将被注册到团队的内部组件可用池、该团队内部的组件可以通过【添加依赖组件】的方式访问到该组件。

- 对外组件
> 打开对外组件后，平台会将该组件端口注册到团队对外组件可用池，这时应用网关可以以用户配置的访问策略访问到该组件，此时<b>平台外部</b>以及<b>平台内部其他团队的组件</b>都可以通过应用网关分配的域名或IP访问到该组件。



- 修改端口信息后需要更新组件。
- 端口打开对内组件后，其他组件要想连接到该组件，需要先【添加依赖组件】建立关联，然后通过<b>连接地址或环境变量</b>连接。
- 端口访问控制可以根据需要开启和关闭，可单独开启，也可以全部开启，如果组件是个worker程序，只需要连接别的组件，本身没有端口监听就没有必要开启端口访问。



### 组件访问策略管理

Rainbond为每一个HTTP组件自动生成一个默认的域名，一般情况下这个域名都比较长，不方便记忆。你可以在组件端口管理面板中快捷绑定自定义域名。

关于组件访问策略的几种管理和高级设置，请参考 [应用网关-访问策略管理](/docs/user-manual/gateway/traffic-control/)

