---
title: Install High Available Apollo Cluster on Rainbond
description: The current document describes how to install the Apollo cluster high with the Rainbond, on the cloud native application management platform.This approach is suitable for users who do not understand the complex technologies of Kubernetes, packaging, etc. and reduces the threshold for deploying Apollo in Kubernetes.
slug: apollo
image: https://static.goodrain.com/wechat/apollo/apollo.png
---

The current document describes how to install the [Rainbond](https://www.rainbond.com) highly available Apollo cluster with the cloud native application management platform.This approach is suitable for users who do not understand the complex technologies of Kubernetes, packaging, etc. and reduces the threshold for deploying Apollo in Kubernetes.

## Background information

### 1.1 Combining Rainbond with Apollo

[Rainbond](https://www.rainbond.com) is an easy-to-use open source native application management platform.

With it, users can complete the deployment and delivery of microservices in the graphical interface.

The ability of Kubernetes and containment technologies empowers the user's business with automatic-transport capabilities such as self-healing, elasticity scalability.

Rainbond has a good integration experience with other micro-service frameworks such as Spring Cloud and Dubo.

As a result, a large number of Rainbond users may also be users of the Apollo Distributive Configuration Management Centre.

Such users no longer need to be interested in how to deploy the Apollo cluster, and the Rainbond team has made Apollo a one-click app template to be deployed for free download and installation by open source users.

This installation greatly reduces the deployment burden on users using the Apollo cluster and is currently supported in version 1.9.2.

Current installation method. Default integration is a set of `PRO` environments to add other environments as follows, see the advanced features section.

### 1.2 On Application Template

The application template is a installation package for Rainbond Cloud Native Application Management platform, and users can install business systems to their own Rainbond based on its one-click installation.No matter how complex this business system may be, the application template will be installed in abstraction as an app, capturing mirrors, configuration information and links between all components in the app.

## Preconditions

- Deployed Rainbond Cloud Application Management Platform：eg: [快速体验版本](https://www.rainbond.com/docs/quick-start/quick-install/?channel=apollo) can run at the cost of launching a container in a personal PC environment.

- Can be connected to the Internet.

## Quick Start

### 3.1 Access to the built-in open-source application store

Select the **Marketplace** tab on the left, switch to the **Open Source Store** tab in the page and search keyword **apollo** to find the Apollo application.

![apollo-1](https://static.goodrain.com/wechat/apollo/apollo-1.png)

### 3.2 One-click Installation

Tap **Install** on the right side of Apollo to access the setup page, fill in simple messages, then click **OK** to start installation. The page automatically jumps to the top.

![apollo-2](https://static.goodrain.com/wechat/apollo/apollo-2.png)

Argument Description：

| Select Item  | Note                                                                                                |
| ------------ | --------------------------------------------------------------------------------------------------- |
| Team Name    | Workspace created by the user to name space isolation                                               |
| Cluster name | Select which K8s cluster Apollo is deployed to                                                      |
| Select app   | Select which Apollo is deployed to which app contains several related components.   |
| App Version  | Select the version of Apollo which is currently available for 1.9.2 |

The Apollo cluster will be installed and run in a few minutes.

![apollo-3](https://static.goodrain.com/wechat/apollo/apollo-3.png)

### 3.3 Tests

Access the default domain name provided by the `Apollo-portal-1.9.2` component to sign in to the Apollo consol. In the system information, the validation `PRO` environment is ready.

![apollo-4](https://static.goodrain.com/wechat/apollo/apollo-4.png)

### 3.4 Configuration

In Rainbond, configuration can be based on the physical presence of the Apollo cluster in the graphical community.The main features include environmental variables, configuration file mounts, plugin configuration.

- Environment variable：can be customized in environment configuration in different component pages.For example, `Apollo-portal-1.9.2` is added by default to define the environment in which the current portal tube is defined.

- The configuration file：can be configured for the component by configuring it in the context of a different component page.

  - `Apollo-portal-1.9.2` Mounts `/apollo-portal/config/apollo-env.properties` to define meta addresses for different environments.

  - `Apollo-config-1.9.2` Mounts `/apollo-configservice/config/application-github.properties` to declare the current config and admin service addresses.

- Plugin configuration：in Rainbond defines the downstream call address by installing the `Apollo-config-1.9.2` `Apollo-config-1.9.2` as the implementation of a Service Mesh micro-service governance.Access the specified port of the downstream service by defining the domain name of the downstream service.In the `Apollo-portal-1.9.2` plugin, the `Apollo-config-1.9.2` 8080 port is named `apollo-config-pro`. This is why only domain names are defined in the configuration and not the port.

## Advanced Features

### 4.1 Expansion of number of cases

The `Apollo-portal-1.9.2` `Apollo-config-1.9.2` component of the Apollo-admin-1.9.2\` config centre is deployed using the Deemployment controller and finds and communicates services through the Service Mesh microservice framework embedded in Rainbrond.All three components can therefore expand multiple instances to cluster deployment by one key.

In the case of `Apollo-portal-1.9.2`, click **Scaled** to change **the number of instances** and click **Settings**.

![apollo-5](https://static.goodrain.com/wechat/apollo/apollo-5.png)

### 4.2 Additional environment

The Apollo Configuration Centre supports multiple sets of environments and manages them using a single portal page.The Apollo cluster that is based on the Rainbond one-click installation has the default `PRO` environment.Then how to add a `DEV` environment in the Rainbond scenario, depending on the `DEV` environment, visit the `Apollo-config-dev` component of `Apollo-config-Dev` via `apollo-config-Dev` or `apollo-admin-Dev`.

1. Deploy a cluster of Apollo and remove the `Apollo-portal-1.9.2` `ApolloPortalDB` component from the new cluster.For ease of administration, change the name of the `Apollo-config-1.9.2` `Apollo-admin-1.9.2` component.Add `Apollo-portal-1.9.2` to `Apollo-config-Dev` `Apollo-admin-Dev`.Optimization shows：

> Note that this step triggers conflict between the connecting environment variables, remember the internal port of the `Apollo-config-Dev` `Apollo-admin-Dev` component, redefining the name you like.

![apollo-6](https://static.goodrain.com/wechat/apollo/apollo-6.png)

2. On the **Environment Configuration** page, modify the `/apollo-configservice/config/application-github.properties` profile of `Apollo-config-Dev` to change the config and admin service addresses to the expected values.

![apollo-10](https://static.goodrain.com/wechat/apollo/apollo-10.png)

3. Enter the plugin page of the `Apollo-config-Dev` `Apollo-portal-1.9.2` separately, modify the configuration for its export network governance plugin, Rainbond built-in microservice framework, define the address of the downstream service by setting the domain name (Domins).For example `Apollo-portal-1.9.2` you need to configure `Apollo-config-Dev` \`\`Apollo-admin-Dev\`.

![apollo-7](https://static.goodrain.com/wechat/apollo/apollo-7.png)

Once the configuration is completed, click **Update Configuration**, `Apollo-portal-1.9.2` to `Apollo-config-Dev` via the apollo-config-dev domain.

Similarly, `Apollo-config-Dev` needs to be configured to access the domain name of `Apollo-admin-Dev`.Update configuration after completion.

4. Change the configuration of `Apollo-portal-1.9.2` to add the new `DEV` environment.

Modify the value of the environmental variable `APOLLO_PORTAL_ENVS` and add `dev` to the environment.

![apollo-8](https://static.goodrain.com/wechat/apollo/apollo-8.png)

Modify the configuration `/apollo-portal/config/apollo-env.properties` to write to the meta address of the `dev` environment.

![apollo-9](https://static.goodrain.com/wechat/apollo/apollo-9.png)

Update the `Apollo-portal-1.9.2` component for all configurations to take effect.View system information and verify the environment for completion.

![apollo-11](https://static.goodrain.com/wechat/apollo/apollo-11.png)
