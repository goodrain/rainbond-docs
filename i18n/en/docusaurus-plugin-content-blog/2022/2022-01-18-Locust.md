---
title: Use Locust for Pressure Test on Rainbod
description: Locust is an easy-to-use, scriptable and extensible performance test tool and has a user-friendly web interface that shows test progress in real time
slug: Locust
image: https://static.goodrain.com/wechat/locus/loct-logo.jpeg
---

[Locust](https://locust.io) is an easy-to-use, writable and extensible performance test tool.And there is a user-friendly, web interface that shows test progress in real time.You can even change load when testing is running.It can also run without a UI to make it easy to use for CI/CD tests.

Locust makes it easier to run load tests distributed on multiple machines.Locust is based on events and can therefore support thousands of parallel users on a computer.Compared to many other event-based applications, it does not use callbacks.Instead, it uses a lightweight process through gevent.Every Locust (locusts) that has concurrent access to the site actually runs in its own process (Greenlet).This allows users to write a very performing scenario in Python, without using a callback or other mechanism.

## Rapid deployment of Locust

The `Locust` app has been published to the `Open Source AppStore`, and the latest version `2.5.1` is available.

![](https://static.goodrain.com/wechat/loct/install-locus.png)

Once installed, you will get a Locus master from cluster, where master components are responsible for providing UI interfaces and dispatching tasks; lave components are responsible for simultaneous assignments. Slave components also support horizontal scaling. When tests are generated and developed to a certain limit, just extend a lave component instance like：

![](https://static.goodrain.com/wechat/locust/tp.png)

## How to use

`Locust_Master` provides a WEB-UI-based graphical admin interface. First login will prompt to enter some information：

> The default user password：locust is configured for the environment variable of the `Locust_Master` component `LOCUST_WEB_AUTH`.

![](https://static.goodrain.com/wechat/locus/locus-index.png)

**Number of users** fill in the number of concurrent users of the simulation. After testing, individual slaves can easily provide simultaneous pressure from thousands of users.

**Spawn rate** fill in the incubation rate of `locusts`, i.e. how many users per second.

**Host** Enter the address of the site you want to pressur.

Once Host and user have been defined and the release is finished, it will be necessary to define the test example of the behavior of the user after access to Host, Locust defines user behavior through a Python script called `/locusfile.py` and edits the `Environment` -> `Config file setting` within the `Loct_Master` component of the Rainbod platform.

![](https://static.goodrain.com/wechat/locust/locusfile.png)

Code example below：

```python
From local import HttpUser, task, between

class MyUser(HttpUser):
    wait_time = between(5, )

    @task(2)
    def index(self):
        self. lient.get("/")

    @task(1)
    def about(self):
        self.client.get("/docs/")
```

This script will mimic the following behavior in order of：

1. Request Host's `/` path twice
2. Request Host's `/docs/` path once
3. Between 5 and 15 seconds each time

The reason for this design is that Locust's designers believe that the real user behavior does not follow the scripts to perform all the requests continuously and then quit.More often than not, the user will pause for a moment when he has done a job, such as reading notes and thinking about the next steps.So a random long blank period will be left between steps.This assumption is in fact more in line with actual user behaviour.

This file will be mounted as a configuration file on the `locus_master` component and will be shared with all `locus_slave` components.This means that if you want to change the contents of this file, just go to edit the configuration file contained in the `locus_master` component.Then update the entire Locust cluster to take effect.

## Results analysis

With the WEB-UI interface provided by Lock, we can easily analyse the results of the stress tests.

![](https://static.goodrain.com/wechat/loct/loct-result.png)

The statistical page will show us a summary report of all the oppressed interfaces.Results include：

**Type** 请求类型；\
**Name** 请求路径；\
**Requests** 请求总数；\
**Fails** 失败次数；\
**Median** 中位数响应时间；\
**90%ile** 90%请求响应时间；\
**Average** 平均响应时间；\
**Min** 最小响应时间；\
**Max** 最大响应时间；\
**Average size** 请求的平均大小；\
**Current PRS** 当前吞吐率；\
**Current Failures** 当前错误率；

![](https://static.goodrain.com/wechat/locus/locus-charts.png)

The Charts page draws the main results into charts that change over time that can give user guidance on trends.

In addition to this, there are several values of concern that will be displayed in the top row of the global spectrum, including the hostdomain name of the current request, the number of conjunctions currently being generated, the number of slave nodes, the total throughput rate of all current requests interfaces, and the error rate.And the button to stop the test.

Several other pages will provide：

**Failures** request failed interfaces and causes of failure;\
**Prospects** unplanned errors in test and error reason\
**Download Data** in csv address\
**Workers** all slave instances

For more tutorials, refer to[Locust官方文档](http://docs.locust.io/en/stable/what-is-locus.html)
