---
title: 异构集群部署
description: 异构集群部署指南
keywords:
  - 异构集群
  - 一云多芯
  - 国产化信创
---

## 一云多芯的异构集群架构

"一云多芯"异构集群是指在同一个集群中同时运行多种 CPU 芯片架构的计算节点，实现异构计算资源的统一管理与调度。在信创环境下，这一能力尤为重要。

传统的企业 IT 环境主要基于 Intel 公司的 X86_64 指令集架构，AMD 的 amd64 指令集与之完全兼容，可视为同一架构类型。而在国产化信创领域，主流国产 CPU 如华为鲲鹏920、飞腾等均基于 ARM64 指令集开发，与传统的 X86_64 架构有着本质区别。

Rainbond 信创版本在以下几个方面提供了全面支持：

1. **多架构节点管理**：能够在同一集群中添加并管理 X86_64 和 ARM64 两种架构的计算节点
2. **架构感知调度**：根据应用的架构需求，自动调度到对应架构的节点上运行
3. **混合架构部署**：同一应用的不同组件可以根据需要部署在不同架构的节点上

## 国产化信创过渡解决方案

国产化信创是一个长期的过程，大量在 X86_64 架构下开发的传统应用需要经过漫长的适配和迁移才能在 ARM64 架构上完全运行。在这个过渡阶段，Rainbond 的"一云多芯"能力提供了一种灵活的解决方案：

1. **平滑过渡**：允许企业逐步将应用从 X86_64 架构迁移到 ARM64 架构，无需一步到位
2. **混合部署**：可以将应用的关键组件优先迁移到 ARM64 架构，而保留部分难以迁移的组件在 X86_64 架构上运行
3. **统一管理**：对多架构应用提供一致的管理体验，降低运维复杂度

## 灵活的部署策略

Rainbond 信创版本提供了高度灵活的异构资源部署策略：

1. **单集群多架构**：在一个集群中同时管理 X86_64 和 ARM64 节点
2. **多集群方案**：通过多集群管理功能，将不同架构的集群统一纳管
3. **混合策略**：根据企业实际需求，灵活组合上述两种方案

这种灵活性使企业决策者能够根据实际情况制定最适合的信创迁移和部署策略，最大化现有 IT 资产的价值，同时平稳推进国产化替代进程。

![](https://static.goodrain.com/localization-guide/%E5%BC%82%E6%9E%84%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86.png)

## 场景一：多架构混合集群部署

Rainbond "信创"版本优化了 [基于主机安装](/docs/installation/install-with-ui/) 相关逻辑，使用者只需要提供所有节点的 IP 地址、节点类型即可完成集群的安装。安装控制器将自动识别所有节点的 CPU 架构信息，完成相关配置并将其纳入集群。整个过程并不需要专门针对 CPU 架构进行任何特殊配置。

### 准备

- 已完成 [Rainbond 快速安装](../../quick-start/quick-install.mdx)
- 准备额外的两个节点，包含不同架构（如一个 X86_64 节点，一个 ARM64 节点）
- 每个节点均安装与其架构匹配的 Linux 操作系统
- 满足 [Rainbond 安装环境要求](../../installation/install-with-ui#前提)

### 操作步骤

**添加不同架构的计算节点**

- 进入**集群管理 → 添加节点** → [基于主机安装](../../installation/install-with-ui/)页面
  - 根据页面提示在对应的不同架构节点上执行安装命令，安装脚本会自动识别节点架构，并使用对应架构的镜像和二进制文件进行初始化。

:::warning 注意
在选择构建节点时，构建节点应在 `X86_64` 和 `ARM64` 架构的节点上都安装。
:::

**验证多架构集群**

- 集群对接完成后，进入**集群管理 → 节点列表**，可以看到所有节点及其架构信息。系统会自动为节点添加对应的架构标签。

![](/docs/how-to-guides/localization-guide/multi-arch-cluster.png)

:::tip

- 建议将管理节点部署在 `X86_64` 架构服务器上，以获得更好的兼容性
- 不同架构节点的资源规格可能有差异，请根据实际情况调整组件资源配置
- 应用组件默认会根据其镜像架构自动调度到对应节点，无需手动配置
  :::

## 场景二：对接不同架构的独立集群

Rainbond 控制台支持对接并管理多个不同架构的 Kubernetes 集群，实现多云多架构的统一管理。这种方式适合已经拥有独立 X86_64 和 ARM64 集群的用户，或者需要在网络隔离环境中部署不同架构集群的场景。

### 准备

- 已完成 [Rainbond 快速安装](../../quick-start/quick-install.mdx)
- 至少两个不同架构（如一个 X86_64 集群，一个 ARM64 集群）的节点或已经部署的 Kubernetes 集群
- 确保对接的集群或节点可以与 Rainbond 快速安装的节点进行网络连通

### 操作步骤

**1. 对接第一个集群（X86_64 架构）**

- **[基于主机安装](../../installation/install-with-ui/)**
  - 进入**平台管理 → 集群 → 添加集群 → 基于主机安装**
  - 根据页面提示在对应的节点上执行安装命令并根据引导完成后续步骤
- **[对接已有 Kubernetes 集群](../../installation/install-with-helm/index.md)**
  - 进入**平台管理 → 集群 → 添加集群 → 接入 Kubernetes 集群**
  - 根据页面提示在对应的节点上执行安装命令并根据引导完成后续步骤

**2. 对接第二个集群（ARM64 架构）**

- **[基于主机安装](../../installation/install-with-ui/)**
  - 进入**平台管理 → 集群 → 添加集群 → 基于主机安装**
  - 根据页面提示在对应的节点上执行安装命令并根据引导完成后续步骤
- **[对接已有 Kubernetes 集群](../../installation/install-with-helm/index.md)**
  - 进入**平台管理 → 集群 → 添加集群 → 接入 Kubernetes 集群**
  - 根据页面提示在对应的节点上执行安装命令并根据引导完成后续步骤

![](/docs/how-to-guides/localization-guide/multi-arch-two-cluster.png)

**3. 创建对应的团队和应用**

- 进入**平台管理 → 团队 → 创建团队**
- 创建针对不同架构的团队（如X86团队、ARM团队）
- 在创建团队时，选择对应架构的集群
- 创建完成后，可以在各团队中部署适合其架构的应用

**4. 验证多集群对接**

- 进入**平台管理 → 集群**查看所有对接的集群状态
- 切换到不同团队，确认可以正常访问对应架构集群的资源

![](/docs/how-to-guides/localization-guide/multi-arch-team.png)

### 跨集群应用管理

对接多个不同架构的集群后，您可以实现以下管理功能：

1. **集中式监控**：通过 Rainbond 控制台统一监控所有集群的资源使用情况和健康状态
2. **应用市场共享**：在应用市场中发布的应用模板可以在不同架构的集群中安装（前提是应用支持目标架构）
3. **架构迁移**：可以通过源码构建自适应架构机制，将应用从一个架构的集群复制迁移到另一个架构的集群
4. **统一用户权限管理**：对所有集群实施统一的用户和权限管理

### 注意事项

- 不同架构集群间的网络通常是隔离的，跨集群的应用组件间通信需要额外配置
- 确保应用市场中发布的应用模板标明支持的架构类型
- 在 ARM64 集群中部署应用时，确保所使用的镜像支持 ARM64 架构
- 对于需要在不同架构集群间迁移的应用，建议使用多架构镜像或确保源代码可在不同架构下构建
